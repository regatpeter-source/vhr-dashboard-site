<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="google-site-verification" content="google6ef33374f3370046">
  <title>VHR DASHBOARD PRO - Gestionnaire VR Multi-Casques</title>
  <script src="/force-http.js"></script>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ¥½</text></svg>">
  <link rel="stylesheet" href="./dashboard-pro.css?v=20260115a">
  <script src="https://www.vhr-dashboard-site.com/socket.io/socket.io.js"></script>
</head>
<body>
  <!-- Ã‰cran de chargement / authentification -->
  <div id="authOverlay" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: #1a1d24; display: flex; align-items: center; justify-content: center; z-index: 9999;">
    <div style="text-align: center; color: #fff;">
      <div style="font-size: 48px; margin-bottom: 20px;">ğŸ”</div>
      <h2>VÃ©rification de l'authentification...</h2>
      <p style="color: #999;">Veuillez patienter...</p>
      <button id="forceLoginButton" style="margin-top:16px;padding:10px 18px;border:none;border-radius:8px;background:#2ecc71;color:#000;font-weight:bold;cursor:pointer;">
        ğŸ”“ Forcer l'affichage du login
      </button>
      <p id="authFallbackHint" style="color:#888;font-size:12px;margin-top:10px;">Si rien ne se passe sous 10s, cliquez ou attendez le forÃ§age automatique.</p>
    </div>
  </div>
  
  <!-- La navbar sera crÃ©Ã©e dynamiquement par dashboard-pro.js -->
  
  <!-- Container principal pour les casques -->
  <div id="deviceGrid" style="opacity: 0; pointer-events: none;"></div>
  
  <!-- Modal container (crÃ©Ã© dynamiquement) -->

  <!-- Super-fallback : enlÃ¨ve l'overlay et affiche le login si check-auth reste bloquÃ© -->
  <script>
    (function() {
      const forceLogin = () => {
        try {
          if (typeof hideDashboardContent === 'function') hideDashboardContent();
          if (typeof showAuthModal === 'function') {
            showAuthModal('login');
            return;
          }
        } catch (e) { /* ignore */ }
        // Si les fonctions ne sont pas chargÃ©es, on cache au moins l'overlay
        const ov = document.getElementById('authOverlay');
        if (ov) ov.style.display = 'none';
      };

      const btn = document.getElementById('forceLoginButton');
      if (btn) {
        btn.addEventListener('click', forceLogin);
      }

      // ForÃ§age automatique aprÃ¨s 10s si l'overlay est toujours lÃ 
      setTimeout(() => {
        const ov = document.getElementById('authOverlay');
        if (ov && ov.style.display !== 'none') {
          console.warn('[auth] Super fallback: forcing login modal');
          forceLogin();
        }
      }, 10000);
    })();
  </script>
  
  <script src="./vhr-audio-stream.js?v=20260115a"></script>
  <script src="./dashboard-pro.js?v=20260115a"></script>
  <script src="./js/admin-installer.js"></script>
</body>
</html>
