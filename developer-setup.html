<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Guide : activer le mode développeur, connecter le casque en USB, puis activer ADB over WiFi pour VR Manager">
  <title>Guide d'installation - Mode développeur & ADB WiFi</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <nav>
      <div class="logo">VHR DASHBOARD</div>
      <ul>
        <li><a href="index.html">Accueil</a></li>
        <li><a href="features.html">Fonctionnalités</a></li>
        <li><a href="pricing.html">Tarifs</a></li>
        <li><a href="contact.html">Contact</a></li>
        <li><a href="developer-setup.html">Guide développeur</a></li>
      </ul>
    </nav>
  </header>
  <main style="max-width:900px;margin:36px auto;padding:24px;">
    <h1>Guide simplifié — Préparer un casque VR pour VHR DASHBOARD</h1>
    <p>Cette page présente la procédure minimale pour préparer un casque VR et tester le serveur VHR localement ou sur une plateforme (Render, autres).</p>

    <section>
      <h2>Prérequis</h2>
      <ul>
        <li>Un PC (Windows, macOS ou Linux) avec le <b>SDK Platform Tools</b> (adb) installé. Téléchargement officiel : <a href="https://developer.android.com/studio/releases/platform-tools" target="_blank" rel="noopener noreferrer">Android Platform Tools</a>.</li>
        <li>Le casque VR (Meta Quest / Pico / autre casque Android) et le câble USB pour le connecter au PC.</li>
        <li>L'application mobile ou le compte développeur (pour certains casques comme Meta Quest, il faut créer une organisation sur <a href="https://developer.oculus.com" target="_blank" rel="noopener noreferrer">developer.oculus.com</a> et activer le mode développeur dans l'app mobile).</li>
        <li>Le fichier d'installation (APK) fourni lors du téléchargement de la démo : <code>downloads/VR-Manager-demo.zip</code>.</li>
      </ul>
    </section>

    <section>
      <h2>Étapes détaillées</h2>
      <ol>
        <li>
          <h3>Installer adb sur votre PC</h3>
          <p>Décompressez <b>platform-tools</b>, puis vérifiez que <code>adb</code> est accessible dans votre terminal / PowerShell :</p>
          <pre><code>adb version
adb devices</code></pre>
          <p>Si vous êtes sous Windows, utilisez PowerShell pour exécuter ces commandes. Ajoutez <code>platform-tools</code> à votre PATH pour ne pas taper le chemin complet.</p>
        </li>

        <li>
          <h3>Activer le mode développeur sur le casque</h3>
          <p>Ouvrez l'application mobile du fabricant (ex. : application Meta/Oculus), sélectionnez votre casque, puis activez <b>Developer Mode</b> (Mode développeur). Cette opération nécessite un compte développeur/organisation pour certains casques.</p>
          <p>Note : les menus peuvent varier selon le modèle (Quest, Pico...). Consultez la documentation fabricant si besoin.</p>
        </li>

        <li>
          <h3>Première connexion : brancher le casque en USB</h3>
          <p>Branchez le casque en USB à votre PC. Depuis votre terminal :</p>
          <pre><code>adb devices</code></pre>
          <p>Une popup apparaitra dans le casque demandant d'autoriser le débogage USB. Acceptez la connexion et cochez « Toujours autoriser » si vous faites confiance à ce PC.</p>
        </li>

        <li>
          <h3>Installer l'application (démo)</h3>
          <p>Si vous avez téléchargé la démo APK, installez-la via adb :</p>
          <pre><code>adb install -r path\to\VR-Manager-demo.apk</code></pre>
          <p>Vous pouvez vérifier la présence de l'application avec :</p>
          <pre><code>adb shell pm list packages | findstr VR-Manager</code></pre>
        </li>

        <li>
          <h3>Activer ADB over Wi‑Fi (pour sessions sans USB)</h3>
          <p>Une fois la connexion USB réussie, vous pouvez passer le casque en mode ADB Wi‑Fi :</p>
          <pre><code>adb tcpip 5555
# Récupérez l'IP du casque (connecté au même réseau Wi‑Fi que votre PC)
adb shell ip addr show wlan0
# ou utilisez la sortie de la commande suivante pour Quest:
adb shell ip route | awk '{print $9}'
# puis connectez
adb connect 192.168.X.Y:5555
adb devices</code></pre>
          <p>Si la connexion est établie, vous verrez le casque apparaître comme <code>192.168.x.y:5555</code> dans la liste <code>adb devices</code>.</p>
        </li>

        <li>
          <h3>Déconnecter le câble USB</h3>
          <p>Après la connexion Wi‑Fi, vous pouvez débrancher le câble USB et continuer à utiliser adb via Wi‑Fi. Pour revenir au mode USB si nécessaire :</p>
          <pre><code>adb usb</code></pre>
        </li>

        <li>
          <h3>Bonne pratique & sécurité</h3>
          <ul>
            <li>Activez le mode développeur uniquement sur des casques de test ou des casques dédiés à la gestion (ne pas activer sur un casque consistentiel pour utilisateurs non-tech).</li>
            <li>Si vous perdez la connexion Wi‑Fi, branchez à nouveau via USB et vérifiez l'adresse IP.</li>
            <li>Sur certains réseaux, le pare-feu/routeur bloque la découverte ; assurez-vous que PC et casque sont sur le même réseau et que le Wi‑Fi autorise la communication entre clients.</li>
          </ul>
        </li>
      </ol>
    </section>

    <section>
      <h2>Utiliser VHR DASHBOARD</h2>
      <p>Après avoir mis en place ADB via USB ou Wi‑Fi, lancez VR Manager sur votre PC et utilisez la fonctionnalité de <b>détection des appareils</b> pour lister et gérer les casques. Pour tout problème de connexion, consultez notre FAQ ou contactez le support via la page <a href="contact.html">Contact</a>.</p>
      <p><a href="/downloads/VR-Manager-demo.zip" class="cta">Télécharger la démo</a></p>
    </section>

  </main>
  <footer style="text-align:center;padding:36px 24px;">
    <small>© 2025 VHR DASHBOARD — Guide d'installation & mode développeur</small>
  </footer>
  <script src="/js/script.js"></script>
</body>
</html>

    <section>
      <h2>Prérequis rapides</h2>
      <ul>
        <li>PC avec <b>adb</b> (Android Platform Tools) installé.</li>
        <li>Câble USB et casque VR (Meta Quest, Pico etc.).</li>
        <li>Node.js (v18+ recommandé) et dépendances : <code>npm ci</code>.</li>
      </ul>
    </section>

    <section>
      <h2>Commandes utiles (exemple rapide)</h2>
      <ol>
        <li>Vérifier adb et appareils : <code>adb version && adb devices</code></li>
        <li>Lancer le serveur (mode développeur / test sans ADB) :
          <pre><code># PowerShell (Windows)
$Env:NO_ADB = '1'; $Env:PORT = '4000'; $Env:HOST='0.0.0.0'; npm start

# Unix
$ NO_ADB=1 PORT=4000 HOST=0.0.0.0 npm start</code></pre>
        </li>
        <li>Vérifier l'état du serveur : <code>curl http://localhost:4000/_status</code> (renvoie bind/env/commit).</li>
        <li>Lancer healthcheck script (CI/Render) : <code>./scripts/render-healthcheck.sh</code></li>
      </ol>
    </section>

    <section>
      <h2>Activer ADB Wi‑Fi (rapide)</h2>
      <p>Branchez le casque en USB une première fois, puis : </p>
      <pre><code>adb tcpip 5555
# récupérer l'IP du casque (wlan0) puis :
adb connect 192.168.X.Y:5555
adb devices</code></pre>
    </section>

    <section>
      <h2>Points importants</h2>
      <ul>
        <li>Le serveur dispose d'un endpoint /_status pour les checks de plateforme et /ping pour healthcheck simple.</li>
        <li>Pour la CI / Render : définissez <code>PORT</code> et (en option) <code>HOST=0.0.0.0</code> ; configurez le health check pour <code>/_status</code>.</li>
        <li>Pour tests locaux rapides, utilisez <code>NO_ADB=1</code> si vous n'avez pas de casque branché.</li>
        <li>Si vous utilisez Stripe, configurez <code>STRIPE_SECRET_KEY</code> et (optionnel) <code>STRIPE_WEBHOOK_SECRET</code> dans l'environnement de la plateforme.</li>
        <li>Auto-WiFi depuis USB : activez <code>AUTO_WIFI_FROM_USB=1</code> pour tenter l'activation automatiquement quand un appareil USB est détecté.</li>
      </ul>
    </section>

    <section>
      <h2>Déploiement & conseils</h2>
      <ul>
        <li>Render : configurez la branche <code>feat/dev-setup-pr</code>, la variable <code>HOST</code> (0.0.0.0), le health check <code>/_status</code>.</li>
        <li>Évitez de committer de gros fichiers (tmp/, tmp/voice, médias). Utilisez <code>.gitignore</code> pour éviter les fichiers LFS volumineux.</li>
        <li>Si vous comptez activer SQLite en production, installez <code>better-sqlite3</code> dans l'image/prod.</li>
      </ul>
    </section>

    <section>
      <h2>Liens & doc</h2>
      <ul>
        <li><a href="https://developer.android.com/studio/releases/platform-tools" target="_blank" rel="noopener">Android Platform Tools</a></li>
        <li>Références dans repository : README.md, render.yaml et scripts/render-healthcheck.sh</li>
      </ul>
    </section>
